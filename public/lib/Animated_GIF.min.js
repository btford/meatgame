!function e(t,r,n){function a(o,f){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!f&&l)return l(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=r[o]={exports:{}};t[o][0].call(s.exports,function(e){var r=t[o][1][e];return a(r?r:e)},s,s.exports,e,t,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t){function r(t){"use strict";function r(){if(0===F.length)throw"No workers left!";return F.pop()}function n(e){F.push(e)}function a(e){b.length;y=e;for(var t=0;d>t&&t<b.length;t++)i(t)}function i(e){var t,a;return t=b[e],t.beingProcessed||t.done?(console.error("Frame already being processed or done!",t.position),void f()):(t.sampleInterval=s,t.beingProcessed=!0,a=r(),a.onmessage=function(e){var r=e.data;delete t.data,t.pixels=Array.prototype.slice.call(r.pixels),t.palette=Array.prototype.slice.call(r.palette),t.done=!0,t.beingProcessed=!1,n(a),f()},void a.postMessage(t))}function o(){for(var e=-1,t=0;t<b.length;t++){var r=b[t];if(!r.done&&!r.beingProcessed){e=t;break}}e>=0&&i(e)}function f(){var e=b.every(function(e){return!e.beingProcessed&&e.done});x++,k(.75*x/b.length),e?_||l(b,y):setTimeout(o,1)}function l(e,t){var r=[],n=new h(r,c,v,{loop:w});_=!0,e.forEach(function(t){k(.75+.25*t.position*1/e.length),n.addFrame(0,0,c,v,t.pixels,{palette:t.palette,delay:m})}),n.end(),k(1),e=[],_=!1,t(r)}var s,d,u,h=e("./omggif").GifWriter,c=t.width||160,v=t.height||120,g=null,p=null,w=0,m=250,b=[],x=0,y=function(){},k=function(){},I=[],F=[],_=!1;t=t||{},s=t.sampleInterval||10,d=t.numWorkers||2,u=t.workerPath||"Animated_GIF.worker.js";for(var A=0;d>A;A++){var G=new Worker(u);I.push(G),F.push(G)}var P=function(){for(var e=[],t=0;256>t;t++)e[t]=String.fromCharCode(t);return function(t){for(var r=t.length,n="",a=0;r>a;a++)n+=e[t[a]];return n}}();this.setSize=function(e,t){c=e,v=t,g=document.createElement("canvas"),g.width=e,g.height=t,p=g.getContext("2d")},this.setDelay=function(e){m=.1*e},this.setRepeat=function(e){w=e},this.addFrame=function(e){null===p&&this.setSize(c,v),p.drawImage(e,0,0,c,v);var t=p.getImageData(0,0,c,v);this.addFrameImageData(t.data)},this.addFrameImageData=function(e){var t=(e.length,new Uint8Array(e));b.push({data:t,done:!1,beingProcessed:!1,position:b.length})},this.onRenderProgress=function(e){k=e},this.isRendering=function(){return _},this.getBase64GIF=function(e){var t=function(t){var r=P(t),n="data:image/gif;base64,"+btoa(r);e(n)};a(t)},this.destroy=function(){I.forEach(function(e){e.terminate()})}}t.exports=r},{"./omggif":3}],2:[function(e){(function(){var t=e("./Animated_GIF");"function"==typeof define&&define.amd?define(function(){return t}):window.Animated_GIF=t}).call(this)},{"./Animated_GIF":1}],3:[function(e,t,r){function n(e,t,r,n){function i(e){var t=e.length;if(2>t||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}var o=0,n=void 0===n?{}:n,f=void 0===n.loop?null:n.loop,l=void 0===n.palette?null:n.palette;if(0>=t||0>=r||t>65535||r>65535)throw"Width/Height invalid.";e[o++]=71,e[o++]=73,e[o++]=70,e[o++]=56,e[o++]=57,e[o++]=97;var s=0,d=0;if(null!==l){for(var u=i(l);u>>=1;)++s;if(u=1<<s,--s,void 0!==n.background){if(d=n.background,d>=u)throw"Background index out of range.";if(0===d)throw"Background index explicitly passed as 0."}}if(e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=(null!==l?128:0)|s,e[o++]=d,e[o++]=0,null!==l)for(var h=0,c=l.length;c>h;++h){var v=l[h];e[o++]=v>>16&255,e[o++]=v>>8&255,e[o++]=255&v}if(null!==f){if(0>f||f>65535)throw"Loop count invalid.";e[o++]=33,e[o++]=255,e[o++]=11,e[o++]=78,e[o++]=69,e[o++]=84,e[o++]=83,e[o++]=67,e[o++]=65,e[o++]=80,e[o++]=69,e[o++]=50,e[o++]=46,e[o++]=48,e[o++]=3,e[o++]=1,e[o++]=255&f,e[o++]=f>>8&255,e[o++]=0}var g=!1;this.addFrame=function(t,r,n,f,s,d){if(g===!0&&(--o,g=!1),d=void 0===d?{}:d,0>t||0>r||t>65535||r>65535)throw"x/y invalid.";if(0>=n||0>=f||n>65535||f>65535)throw"Width/Height invalid.";if(s.length<n*f)throw"Not enough pixels for the frame size.";var u=!0,h=d.palette;if((void 0===h||null===h)&&(u=!1,h=l),void 0===h||null===h)throw"Must supply either a local or global palette.";for(var c=i(h),v=0;c>>=1;)++v;c=1<<v;var p=void 0===d.delay?0:d.delay,w=void 0===d.disposal?0:d.disposal;if(0>w||w>3)throw"Disposal out of range.";var m=!1,b=0;if(void 0!==d.transparent&&null!==d.transparent&&(m=!0,b=d.transparent,0>b||b>=c))throw"Transparent color index.";if((0!==w||m||0!==p)&&(e[o++]=33,e[o++]=249,e[o++]=4,e[o++]=w<<2|(m===!0?1:0),e[o++]=255&p,e[o++]=p>>8&255,e[o++]=b,e[o++]=0),e[o++]=44,e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=255&f,e[o++]=f>>8&255,e[o++]=u===!0?128|v-1:0,u===!0)for(var x=0,y=h.length;y>x;++x){var k=h[x];e[o++]=k>>16&255,e[o++]=k>>8&255,e[o++]=255&k}o=a(e,o,2>v?2:v,s)},this.end=function(){return g===!1&&(e[o++]=59,g=!0),o}}function a(e,t,r,n){function a(r){for(;h>=r;)e[t++]=255&c,c>>=8,h-=8,t===o+256&&(e[o]=255,o=t++)}function i(e){c|=e<<h,h+=u,a(8)}e[t++]=r;var o=t++,f=1<<r,l=f-1,s=f+1,d=s+1,u=r+1,h=0,c=0,v=n[0]&l,g={};i(f);for(var p=1,w=n.length;w>p;++p){var m=n[p]&l,b=v<<8|m,x=g[b];if(void 0===x){for(c|=v<<h,h+=u;h>=8;)e[t++]=255&c,c>>=8,h-=8,t===o+256&&(e[o]=255,o=t++);4096===d?(i(f),d=s+1,u=r+1,g={}):(d>=1<<u&&++u,g[b]=d++),v=m}else v=x}return i(v),i(s),a(1),o+1===t?e[o]=0:(e[o]=t-o-1,e[t++]=0),t}function i(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||57!==e[t++]||97!==e[t++])throw"Invalid GIF 89a header.";{var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,f=7&a,l=1<<f+1;e[t++]}e[t++];var s=null;i&&(s=t,t+=3*l);var d=null,u=!0,h=[],c=0,v=null,g=0,d=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,d=e[t++]|e[t++]<<8,t++;else for(t+=12;;){var p=e[t++];if(0===p)break;t+=p}break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var w=e[t++];c=e[t++]|e[t++]<<8,v=e[t++],0===(1&w)&&(v=null),g=w>>2&7,t++;break;case 254:for(;;){var p=e[t++];if(0===p)break;t+=p}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var m=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,k=e[t++],I=k>>7,F=7&k,_=1<<F+1,A=s,G=!1;if(I){var G=!0;A=t,t+=3*_}var P=t;for(t++;;){var p=e[t++];if(0===p)break;t+=p}h.push({x:m,y:b,width:x,height:y,has_local_palette:G,palette_offset:A,data_offset:P,data_length:t-P,transparent_index:v,delay:c,disposal:g});break;case 59:u=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return h.length},this.frameInfo=function(e){if(0>e||e>=h.length)throw"Frame index out of range.";return h[e]},this.decodeAndBlitFrameBGRA=function(t,n){var a=this.frameInfo(t),i=a.width*a.height,f=new Uint8Array(i);o(e,a.data_offset,f,i);var l=a.palette_offset,s=a.transparent_index;null===s&&(s=256);for(var d=4*(r-a.width),u=4*(a.y*r+a.x),h=a.width,c=0,v=f.length;v>c;++c){var g=f[c];if(g===s)u+=4;else{var p=e[l+3*g],w=e[l+3*g+1],m=e[l+3*g+2];n[u++]=m,n[u++]=w,n[u++]=p,n[u++]=255}0===--h&&(u+=d,h=a.width)}},this.decodeAndBlitFrameRGBA=function(t,n){var a=this.frameInfo(t),i=a.width*a.height,f=new Uint8Array(i);o(e,a.data_offset,f,i);var l=0,s=a.palette_offset,d=a.transparent_index;null===d&&(d=256);for(var u=4*(r-a.width),l=4*(a.y*r+a.x),h=a.width,c=0,v=f.length;v>c;++c){var g=f[c];if(g===d)l+=4;else{var p=e[s+3*g],w=e[s+3*g+1],m=e[s+3*g+2];n[l++]=p,n[l++]=w,n[l++]=m,n[l++]=255}0===--h&&(l+=u,h=a.width)}}}function o(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,f=o+1,l=a+1,s=(1<<l)-1,d=0,u=0,h=0,c=e[t++],v=new Int32Array(4096),g=null;;){for(;16>d&&0!==c;)u|=e[t++]<<d,d+=8,1===c?c=e[t++]:--c;if(l>d)break;var p=u&s;if(u>>=l,d-=l,p!==i){if(p===o)break;for(var w=f>p?p:g,m=0,b=w;b>i;)b=v[b]>>8,++m;var x=b,y=h+m+(w!==p?1:0);if(y>n)return void console.log("Warning, gif stream longer than expected.");r[h++]=x,h+=m;var k=h;for(w!==p&&(r[h++]=x),b=w;m--;)b=v[b],r[--k]=255&b,b>>=8;null!==g&&4096>f&&(v[f++]=g<<8|x,f>=s+1&&12>l&&(++l,s=s<<1|1)),g=p}else f=o+1,l=a+1,s=(1<<l)-1,g=null}return h!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=n,r.GifReader=i}catch(f){}},{}]},{},[2]);